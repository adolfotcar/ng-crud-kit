@if (returnBtnUrl()!=''){
    <button matButton="tonal" [routerLink]="returnBtnUrl()" class="return-btn">
        @if(returnBtnIcon()!='') {
            <mat-icon fontIcon="{{ returnBtnIcon() }}"></mat-icon>
        }
        {{ returnBtnText() }}
    </button>
}
@if (addBtnUrl()!=''){
    <button matButton="filled" [routerLink]="addBtnUrl()">
        <mat-icon>add</mat-icon>
        Add
    </button>
}
@if (this.isLoading()) {
    <mat-spinner></mat-spinner>
}
<div class="table-container">
    <mat-form-field class="full-width-input">
        <mat-label>{{ filterLabel() }}</mat-label>
        <input matInput (keyup)="applyFilter($event)" [(ngModel)]="filterValue">
        @if (filterValue!='') {
            <button matSuffix matIconButton aria-label="Clear" (click)="filterValue=''">
                <mat-icon>close</mat-icon>
            </button>
        }
    </mat-form-field>
    <mat-table [dataSource]="dataSource" matSort>        
        @for(column of columns(); track column.db_name){
            <ng-container matColumnDef="{{ column.db_name }}">
                <mat-header-cell *matHeaderCellDef mat-sort-header>{{ column.title }}</mat-header-cell>
                <mat-cell *matCellDef="let row"> {{ row[column.db_name!] }} </mat-cell>
            </ng-container>
        }
        <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>Remove</mat-header-cell>
            <mat-cell *matCellDef="let row">
                <a matMiniFab (click)="edit(row[idField()])" color="primary">
                    <mat-icon fontIcon="edit"></mat-icon>
                </a>
                @if (removingId()!=row[idField()]) {
                    <button matMiniFab (click)="remove(row[idField()])" color="warn">
                        <mat-icon fontIcon="delete"></mat-icon>
                    </button>
                } @else {
                    <mat-spinner [diameter]="24" color="warn"></mat-spinner>
                }
            </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="getDisplayedColumns()"></mat-header-row>
        <mat-row *matRowDef="let row; columns: getDisplayedColumns();"></mat-row>
    </mat-table>
    <mat-paginator [pageSizeOptions]="[10, 25, 50, 100, 500]" showFirstLastButtons></mat-paginator>
</div>